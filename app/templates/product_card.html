<article class="product-card" aria-label="Карточка товара {{ product.name }}">
    <div class="product-card__img-wrapper">
        <img src="{{ url_for('static', filename=product.image_url) }}"
             alt="Фото {{ product.name }}"
             class="product-card__img" loading="lazy" />
        {% if product.is_new %}
            <span class="badge badge--new" aria-label="Новинка">Новинка</span>
        {% endif %}
        {% if product.is_promotion %}
            <span class="badge badge--promo" aria-label="Акция">Акция</span>
        {% endif %}
        <div class="product-card__actions">
            <button type="button"
                    class="action-btn wishlist-btn{% if product.in_wishlist %} active{% endif %}"
                    data-product-id="{{ product.id }}"
                    data-action="wishlist"
                    aria-pressed="{{ 'true' if product.in_wishlist else 'false' }}"
                    aria-label="Добавить в избранное">
                <span class="material-icons">
                    {{ 'bookmark' if product.in_wishlist else 'bookmark_add' }}
                </span>
            </button>
            <button type="button"
                    class="action-btn cart-btn{% if product.in_cart %} active{% endif %}"
                    data-product-id="{{ product.id }}"
                    data-action="cart"
                    aria-pressed="{{ 'true' if product.in_cart else 'false' }}"
                    aria-label="Добавить в корзину">
                <span class="material-icons">
                    {{ 'remove_shopping_cart' if product.in_cart else 'add_shopping_cart' }}
                </span>
            </button>
        </div>
    </div>
    <div class="product-card__body">
        <h3 class="product-card__title">{{ product.name }}</h3>
        <div class="product-card__category">{{ product.category }}</div>
        <div class="product-card__text">{{ product.description | truncate(90) }}</div>
        <div class="product-card__footer">
            <span class="product-card__price">{{ product.price }} ₸</span>
        </div>
        <a href="{{ url_for('shop.product_details', product_id=product.id) }}"
           class="product-card__details-link">Подробнее</a>
    </div>
</article>

